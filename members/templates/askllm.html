{% extends 'base.html' %}

{% block title %}
  Results
{% endblock %}

{% block links %}
  <link rel="stylesheet" href="../static/testimonial.css" />
  <link rel="stylesheet" href="../static/intro.css" />
  <link rel="stylesheet" href="../static/post.css" />
  <link rel="stylesheet" href="../static/styles.css" />
  <script>
    const hash = '{{ hash_token }}'
    const socket = new WebSocket(`ws://${window.location.host}/ws/askllm/${hash}/`)
    
    socket.onopen = () => console.log('‚úÖ WebSocket –æ—Ç–∫—Ä—ã—Ç')
    socket.onmessage = function (event) {
      console.log('üì© –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ:', event.data)
      const data = JSON.parse(event.data)
      document.getElementById('result').innerText = data.message
    }
    socket.onerror = function (error) {
      console.error('üö® –û—à–∏–±–∫–∞ WebSocket:', error)
    }
    socket.onclose = function () {
      console.warn('‚ùå WebSocket –∑–∞–∫—Ä—ã—Ç')
    }
  </script>
{% endblock %}

{% block content %}
  <div class="intro-container">
    <div class="intro-content">
      <h2 class="intro-heading">–û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏:</h2>
    </div>
  </div>

  <div class="testimonial-container">
    <div class="testimonial-box">
      <div class="spacer"></div>

      <h3 class="testimonial-quote" id="result">–û–∂–∏–¥–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>

      <p class="testimonial-author">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –∫–Ω–∏–≥–∞–º</p>

      <div class="spacer"></div>
    </div>
  </div>
{% endblock %}
